import{r as d,j as e}from"./framer-TAp2EHm1.js";import{e as M,C as B,d as P}from"./index-ufr3Enzw.js";import{D as V,a as G,b as $,c as I}from"./dialog-BsNF7nts.js";import{N as p}from"./nav-37Khq6Kl.js";import{F as g}from"./button1-pze4i3W1.js";import{G as j,C as L}from"./calendar-KFbTPfLS.js";import{N as r}from"./number-ticker-BpJqz8Us.js";import"./react-Csw2ODfV.js";import"./index-CxGmL32K.js";import"./index-DadMF53N.js";import"./index-DNux_Z8B.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M18 22H4a2 2 0 0 1-2-2V6",key:"pblm9e"}],["path",{d:"m22 13-1.296-1.296a2.41 2.41 0 0 0-3.408 0L11 18",key:"nf6bnh"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["rect",{width:"16",height:"16",x:"6",y:"2",rx:"2",key:"12espp"}]],H=M("images",E),W=()=>{const f="https://www.chaosama.asia",i=new Date,u=i.getFullYear(),N=String(i.getMonth()+1).padStart(2,"0"),w=String(i.getDate()).padStart(2,"0"),b=parseInt(N,10),v=Number(w),[c,k]=d.useState([]),[l,m]=d.useState(null),y=t=>{if(t===0)return{size:"0",unit:"Bytes"};const s=1024,a=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(t)/Math.log(s));return{size:(t/Math.pow(s,n)).toFixed(2),unit:a[n]}},S=c.reduce((t,s)=>t+s.fileSize,0),{size:D,unit:z}=y(S);d.useEffect(()=>{fetch(`${f}/api/photos`).then(t=>t.json()).then(t=>k(t)).catch(t=>console.error("获取图片失败",t))},[]);const C=c.reduce((t,s)=>{const a=new Date(s.uploadDate),n=a.getFullYear(),o=a.getMonth()+1,x=`${n}-${o.toString().padStart(2,"0")}`;return t[x]||(t[x]={year:n,month:o,photos:[]}),t[x].photos.push(s),t},{}),h=Object.entries(C).sort(([t],[s])=>s.localeCompare(t)),F=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"];return c.length===0?e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx(g,{}),e.jsx(j,{}),e.jsx("main",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center py-50",children:[e.jsx(H,{className:"mx-auto h-16 w-16 text-muted-foreground mb-6"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"相册为空"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{}),e.jsx(g,{}),e.jsx(j,{}),e.jsxs("main",{className:"container mx-auto px-4 pb-8 pt-2",children:[e.jsx("div",{className:"flex items-center justify-between mt-20 mb-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-2xl font-bold",children:["截止  ",e.jsx(r,{value:u,startValue:100,className:"whitespace-pre-wrap text-3xl tracking-tighter text-orange-400 dark:text-[#8859eb]"})," 年"]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-2xl font-bold",children:[e.jsx(r,{value:b,startValue:0,className:"whitespace-pre-wrap text-3xl tracking-tighter text-orange-400 dark:text-[#8859eb]"})," 月"]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-2xl font-bold",children:[e.jsx(r,{value:v,startValue:0,className:"whitespace-pre-wrap text-3xl tracking-tighter text-orange-400 dark:text-[#8859eb]"})," 日"]})})]})}),e.jsx("div",{className:"flex items-center justify-between pb-6 mb-6 border-b-2 border-slate-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-2xl font-bold",children:["我已经上传了 ",e.jsx(r,{value:c.length,startValue:0,className:"whitespace-pre-wrap text-3xl tracking-tighter text-orange-400 dark:text-[#8859eb]"})," 张照片"]})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:"text-2xl font-bold",children:["共 ",e.jsx(r,{value:parseFloat(D),decimalPlaces:2,className:"whitespace-pre-wrap text-3xl tracking-tighter text-orange-400 dark:text-[#8859eb]"})," ",z]})}),e.jsx("div",{className:"flex items-center gap-2 ",children:e.jsxs("span",{className:"text-2xl font-bold",children:["时间跨越 ",e.jsx(r,{value:h.length,startValue:0,className:"whitespace-pre-wrap text-3xl tracking-tighter text-orange-400 dark:text-[#8859eb]"})," 个月"]})})]})}),e.jsx("div",{className:"space-y-12",children:h.map(([t,s])=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6 mb-12",children:[e.jsx(L,{className:"h-6 w-6 text-primary"}),e.jsxs("h2",{className:"text-2xl font-bold",children:[s.year,"年 ",F[s.month-1]]}),e.jsxs("span",{className:"text-muted-foreground",children:["(",s.photos.length," 张照片)"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s.photos.map(a=>e.jsx(B,{className:"relative overflow-hidden hover:shadow-lg transition-shadow rounded-none px-6",children:e.jsx(P,{className:"p-0",children:e.jsxs("div",{className:"relative aspect-[9/11]",children:[e.jsx("img",{loading:"lazy",src:a.url||"/placeholder.svg",alt:a.fileName,onClick:()=>m(a),className:"w-full h-full object-cover transition-transform"}),e.jsx("div",{className:"absolute bottom-2 left-2 text-white text-xs px-2 py-1 rounded",children:new Date(a.uploadDate).toLocaleDateString()})]})})},a.id))})]},t))}),e.jsx(V,{open:!!l,onOpenChange:()=>m(null),children:e.jsxs(G,{className:"w-auto max-h-[90vh] ",children:[e.jsx($,{children:e.jsx(I,{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("span",{className:"block",children:l?.fileName.replace(/\.[^/.]+$/,"")}),e.jsx("span",{className:"text-sm text-muted-foreground font-normal",children:l&&new Date(l.uploadDate).toLocaleString()})]})})}),l&&e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{loading:"lazy",src:l.url,alt:l.fileName,className:"pointer-events-none relative z-10 h-50 w-50 sm:h-80 sm:w-80 object-cover"}),e.jsx("h3",{className:"mt-4 text-center text-xl sm:text-2xl font-bold text-neutral-700 dark:text-neutral-300",children:l.fileName.replace(/\.[^/.]+$/,"")})]})]})})]})]})};export{W as default};
