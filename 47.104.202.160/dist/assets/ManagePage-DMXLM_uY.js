import{j as t,r as u,R as _}from"./framer-TAp2EHm1.js";import{B as x,b as V}from"./button-4c2KjQxI.js";import{e as P,c as A,u as X,f as pt,C as w,d as k,a as O,b as M,g as xt}from"./index-ufr3Enzw.js";import{d as U,R as bt,T as vt,W as yt,e as jt,C as wt,f as Nt,g as Dt,h as kt,i as G,P as At,O as St,D as K,a as W,b as J,c as Z,j as Q,k as tt,l as Et}from"./dialog-BsNF7nts.js";import{F as Tt}from"./button1-pze4i3W1.js";import{u as et}from"./index-DNux_Z8B.js";import{T as Ct,B as q}from"./badge-DFbQIXjU.js";import{L as F,I as T}from"./label-Dg7hZxrq.js";import"./index-DadMF53N.js";import"./react-Csw2ODfV.js";import"./index-De41xqz2.js";import"./index-CxGmL32K.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],Y=P("file-image",Pt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],$t=P("hard-drive",_t);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Rt=P("plus",zt);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Mt=P("square-pen",Ot);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],B=P("trash-2",It);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Yt=P("upload",Ft);function Bt(){const s=et(),a=()=>{localStorage.removeItem("token"),s("/")};return t.jsx(x,{onClick:a,children:"退出登录"})}function Lt({className:s,...a}){return t.jsx("textarea",{"data-slot":"textarea",className:A("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),...a})}var at="AlertDialog",[Ht,Fe]=jt(at,[U]),S=U(),st=s=>{const{__scopeAlertDialog:a,...e}=s,o=S(a);return t.jsx(bt,{...o,...e,modal:!0})};st.displayName=at;var qt="AlertDialogTrigger",rt=u.forwardRef((s,a)=>{const{__scopeAlertDialog:e,...o}=s,m=S(e);return t.jsx(vt,{...m,...o,ref:a})});rt.displayName=qt;var Vt="AlertDialogPortal",ot=s=>{const{__scopeAlertDialog:a,...e}=s,o=S(a);return t.jsx(At,{...o,...e})};ot.displayName=Vt;var Xt="AlertDialogOverlay",nt=u.forwardRef((s,a)=>{const{__scopeAlertDialog:e,...o}=s,m=S(e);return t.jsx(St,{...m,...o,ref:a})});nt.displayName=Xt;var C="AlertDialogContent",[Ut,Gt]=Ht(C),Kt=pt("AlertDialogContent"),it=u.forwardRef((s,a)=>{const{__scopeAlertDialog:e,children:o,...m}=s,d=S(e),h=u.useRef(null),p=X(a,h),n=u.useRef(null);return t.jsx(yt,{contentName:C,titleName:lt,docsSlug:"alert-dialog",children:t.jsx(Ut,{scope:e,cancelRef:n,children:t.jsxs(wt,{role:"alertdialog",...d,...m,ref:p,onOpenAutoFocus:Nt(m.onOpenAutoFocus,l=>{l.preventDefault(),n.current?.focus({preventScroll:!0})}),onPointerDownOutside:l=>l.preventDefault(),onInteractOutside:l=>l.preventDefault(),children:[t.jsx(Kt,{children:o}),t.jsx(Jt,{contentRef:h})]})})})});it.displayName=C;var lt="AlertDialogTitle",dt=u.forwardRef((s,a)=>{const{__scopeAlertDialog:e,...o}=s,m=S(e);return t.jsx(Dt,{...m,...o,ref:a})});dt.displayName=lt;var ct="AlertDialogDescription",mt=u.forwardRef((s,a)=>{const{__scopeAlertDialog:e,...o}=s,m=S(e);return t.jsx(kt,{...m,...o,ref:a})});mt.displayName=ct;var Wt="AlertDialogAction",ut=u.forwardRef((s,a)=>{const{__scopeAlertDialog:e,...o}=s,m=S(e);return t.jsx(G,{...m,...o,ref:a})});ut.displayName=Wt;var ht="AlertDialogCancel",ft=u.forwardRef((s,a)=>{const{__scopeAlertDialog:e,...o}=s,{cancelRef:m}=Gt(ht,e),d=S(e),h=X(a,m);return t.jsx(G,{...d,...o,ref:h})});ft.displayName=ht;var Jt=({contentRef:s})=>{const a=`\`${C}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${C}\` by passing a \`${ct}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${C}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return u.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},Zt=st,Qt=rt,te=ot,ee=nt,ae=it,se=ut,re=ft,oe=dt,ne=mt;function ie({...s}){return t.jsx(Zt,{"data-slot":"alert-dialog",...s})}function le({...s}){return t.jsx(Qt,{"data-slot":"alert-dialog-trigger",...s})}function de({...s}){return t.jsx(te,{"data-slot":"alert-dialog-portal",...s})}function ce({className:s,...a}){return t.jsx(ee,{"data-slot":"alert-dialog-overlay",className:A("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...a})}function me({className:s,...a}){return t.jsxs(de,{children:[t.jsx(ce,{}),t.jsx(ae,{"data-slot":"alert-dialog-content",className:A("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...a})]})}function ue({className:s,...a}){return t.jsx("div",{"data-slot":"alert-dialog-header",className:A("flex flex-col gap-2 text-center sm:text-left",s),...a})}function he({className:s,...a}){return t.jsx("div",{"data-slot":"alert-dialog-footer",className:A("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...a})}function fe({className:s,...a}){return t.jsx(oe,{"data-slot":"alert-dialog-title",className:A("text-lg font-semibold",s),...a})}function ge({className:s,...a}){return t.jsx(ne,{"data-slot":"alert-dialog-description",className:A("text-muted-foreground text-sm",s),...a})}function pe({className:s,...a}){return t.jsx(se,{className:A(V(),s),...a})}function xe({className:s,...a}){return t.jsx(re,{className:A(V({variant:"outline"}),s),...a})}function be(s){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],e=document.createElement("style");e.type="text/css",a.appendChild(e),e.styleSheet?e.styleSheet.cssText=s:e.appendChild(document.createTextNode(s))}Array(12).fill(0);let L=1;class ve{constructor(){this.subscribe=a=>(this.subscribers.push(a),()=>{const e=this.subscribers.indexOf(a);this.subscribers.splice(e,1)}),this.publish=a=>{this.subscribers.forEach(e=>e(a))},this.addToast=a=>{this.publish(a),this.toasts=[...this.toasts,a]},this.create=a=>{var e;const{message:o,...m}=a,d=typeof a?.id=="number"||((e=a.id)==null?void 0:e.length)>0?a.id:L++,h=this.toasts.find(n=>n.id===d),p=a.dismissible===void 0?!0:a.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),h?this.toasts=this.toasts.map(n=>n.id===d?(this.publish({...n,...a,id:d,title:o}),{...n,...a,id:d,dismissible:p,title:o}):n):this.addToast({title:o,...m,dismissible:p,id:d}),d},this.dismiss=a=>(a?(this.dismissedToasts.add(a),requestAnimationFrame(()=>this.subscribers.forEach(e=>e({id:a,dismiss:!0})))):this.toasts.forEach(e=>{this.subscribers.forEach(o=>o({id:e.id,dismiss:!0}))}),a),this.message=(a,e)=>this.create({...e,message:a}),this.error=(a,e)=>this.create({...e,message:a,type:"error"}),this.success=(a,e)=>this.create({...e,type:"success",message:a}),this.info=(a,e)=>this.create({...e,type:"info",message:a}),this.warning=(a,e)=>this.create({...e,type:"warning",message:a}),this.loading=(a,e)=>this.create({...e,type:"loading",message:a}),this.promise=(a,e)=>{if(!e)return;let o;e.loading!==void 0&&(o=this.create({...e,promise:a,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));const m=Promise.resolve(a instanceof Function?a():a);let d=o!==void 0,h;const p=m.then(async l=>{if(h=["resolve",l],_.isValidElement(l))d=!1,this.create({id:o,type:"default",message:l});else if(je(l)&&!l.ok){d=!1;const f=typeof e.error=="function"?await e.error(`HTTP error! status: ${l.status}`):e.error,v=typeof e.description=="function"?await e.description(`HTTP error! status: ${l.status}`):e.description,N=typeof f=="object"&&!_.isValidElement(f)?f:{message:f};this.create({id:o,type:"error",description:v,...N})}else if(l instanceof Error){d=!1;const f=typeof e.error=="function"?await e.error(l):e.error,v=typeof e.description=="function"?await e.description(l):e.description,N=typeof f=="object"&&!_.isValidElement(f)?f:{message:f};this.create({id:o,type:"error",description:v,...N})}else if(e.success!==void 0){d=!1;const f=typeof e.success=="function"?await e.success(l):e.success,v=typeof e.description=="function"?await e.description(l):e.description,N=typeof f=="object"&&!_.isValidElement(f)?f:{message:f};this.create({id:o,type:"success",description:v,...N})}}).catch(async l=>{if(h=["reject",l],e.error!==void 0){d=!1;const b=typeof e.error=="function"?await e.error(l):e.error,f=typeof e.description=="function"?await e.description(l):e.description,j=typeof b=="object"&&!_.isValidElement(b)?b:{message:b};this.create({id:o,type:"error",description:f,...j})}}).finally(()=>{d&&(this.dismiss(o),o=void 0),e.finally==null||e.finally.call(e)}),n=()=>new Promise((l,b)=>p.then(()=>h[0]==="reject"?b(h[1]):l(h[1])).catch(b));return typeof o!="string"&&typeof o!="number"?{unwrap:n}:Object.assign(o,{unwrap:n})},this.custom=(a,e)=>{const o=e?.id||L++;return this.create({jsx:a(o),id:o,...e}),o},this.getActiveToasts=()=>this.toasts.filter(a=>!this.dismissedToasts.has(a.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const y=new ve,ye=(s,a)=>{const e=a?.id||L++;return y.addToast({title:s,...a,id:e}),e},je=s=>s&&typeof s=="object"&&"ok"in s&&typeof s.ok=="boolean"&&"status"in s&&typeof s.status=="number",we=ye,Ne=()=>y.toasts,De=()=>y.getActiveToasts(),D=Object.assign(we,{success:y.success,info:y.info,warning:y.warning,error:y.error,custom:y.custom,message:y.message,promise:y.promise,dismiss:y.dismiss,loading:y.loading},{getHistory:Ne,getToasts:De});be("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function ke(){const[s,a]=u.useState([]),[e,o]=u.useState(!0),[m,d]=u.useState(!1),[h,p]=u.useState(null),[n,l]=u.useState({title:"",content:"",tags:[]}),[b,f]=u.useState(""),v="https://www.chaosama.asia",j=async()=>{try{const r=await fetch(`${v}/api/posts`);if(r.ok){const c=await r.json();a(c)}else D("获取文章列表失败")}catch{D("网络请求失败")}finally{o(!1)}},N=async r=>{if(r.preventDefault(),!n.title.trim()||!n.content.trim()){D("标题和内容不能为空");return}try{const c=h?`${v}/api/posts/${h.id}`:`${v}/api/posts`,H=await fetch(c,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(n)});if(H.ok)D("提交成功"),d(!1),$(),j();else{const gt=await H.json();D(gt.message||"操作失败")}}catch{D("网络请求失败")}},I=async r=>{try{const c=await fetch(`${v}/api/posts/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(c.ok)D("文章删除成功"),j();else{const E=await c.json();D(E.message||"删除失败")}}catch{D("网络请求失败")}},$=()=>{l({title:"",content:"",tags:[]}),f(""),p(null)},z=r=>{p(r),l({title:r.title,content:r.content,tags:r.tags}),d(!0)},R=()=>{const r=b.trim();r&&!n.tags.includes(r)&&(l(c=>({...c,tags:[...c.tags,r]})),f(""))},i=r=>{l(c=>({...c,tags:c.tags.filter(E=>E!==r)}))},g=r=>{r.key==="Enter"&&(r.preventDefault(),R())};return u.useEffect(()=>{j()},[]),e?t.jsx("div",{className:"container mx-auto p-6",children:t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx("div",{className:"text-lg",children:"加载中..."})})}):t.jsxs("div",{className:"container mx-auto p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h1",{className:"text-3xl font-bold",children:"文章管理"}),t.jsxs(K,{open:m,onOpenChange:d,children:[t.jsxs(x,{onClick:()=>{$(),d(!0)},children:[t.jsx(Rt,{className:"w-4 h-4 mr-2"}),"新增文章"]}),t.jsx("a",{href:"https://literal.club/library",children:t.jsx(x,{className:"ml-2",children:"书架管理"})}),t.jsx(Bt,{}),t.jsxs(W,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[t.jsxs(J,{children:[t.jsx(Z,{children:h?"编辑文章":"新增文章"}),t.jsx(Q,{children:h?"修改文章内容和标签":"创建一篇新文章"})]}),t.jsxs("form",{onSubmit:N,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx(F,{htmlFor:"title",children:"标题"}),t.jsx(T,{id:"title",value:n.title,onChange:r=>l(c=>({...c,title:r.target.value})),placeholder:"请输入文章标题",required:!0})]}),t.jsxs("div",{children:[t.jsx(F,{htmlFor:"content",children:"内容"}),t.jsx(Lt,{id:"content",value:n.content,onChange:r=>l(c=>({...c,content:r.target.value})),placeholder:"请输入文章内容",rows:8,required:!0})]}),t.jsxs("div",{children:[t.jsx(F,{htmlFor:"tags",children:"标签"}),t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx(T,{id:"tags",value:b,onChange:r=>f(r.target.value),onKeyPress:g,placeholder:"输入标签后按回车添加"}),t.jsx(x,{type:"button",onClick:R,variant:"outline",children:t.jsx(Ct,{className:"w-4 h-4"})})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:n.tags.map((r,c)=>t.jsxs(q,{variant:"secondary",className:"cursor-pointer",onClick:()=>i(r),children:[r," ×"]},c))})]}),t.jsxs(tt,{children:[t.jsx(x,{type:"button",variant:"outline",onClick:()=>d(!1),children:"取消"}),t.jsx(x,{type:"submit",children:h?"更新":"发布"})]})]})]})]})]}),t.jsx("div",{className:"grid gap-4",children:s.length===0?t.jsx(w,{children:t.jsx(k,{className:"flex justify-center items-center h-32",children:t.jsx("p",{className:"text-muted-foreground",children:"暂无文章"})})}):s.map(r=>t.jsxs(w,{children:[t.jsx(O,{children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx(M,{className:"text-xl mb-2",children:r.title}),t.jsxs(xt,{children:["发布时间: ",new Date(r.created_at).toLocaleString("zh-CN")]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(x,{variant:"outline",size:"sm",onClick:()=>z(r),children:t.jsx(Mt,{className:"w-4 h-4"})}),t.jsxs(ie,{children:[t.jsx(le,{asChild:!0,children:t.jsx(x,{variant:"outline",size:"sm",children:t.jsx(B,{className:"w-4 h-4"})})}),t.jsxs(me,{children:[t.jsxs(ue,{children:[t.jsx(fe,{children:"确认删除"}),t.jsxs(ge,{children:['确定要删除文章 "',r.title,'" 吗？此操作不可撤销。']})]}),t.jsxs(he,{children:[t.jsx(xe,{children:"取消"}),t.jsx(pe,{onClick:()=>I(r.id),children:"删除"})]})]})]})]})]})}),t.jsxs(k,{children:[t.jsx("p",{className:"text-muted-foreground mb-3 line-clamp-3",children:r.content}),r.tags.length>0&&t.jsx("div",{className:"flex flex-wrap gap-2",children:r.tags.map((c,E)=>t.jsx(q,{variant:"outline",children:c},E))})]})]},r.id))})]})}function Ae(){const[s,a]=u.useState([]),[e,o]=u.useState({name:"",author:"",href:"",img:""}),m="https://www.chaosama.asia";u.useEffect(()=>{d()},[]);const d=()=>{fetch(`${m}/api/albums`).then(n=>n.json()).then(a)},h=async n=>{confirm("确定删除这张专辑吗？")&&(await fetch(`${m}/api/albums/${n}`,{method:"DELETE"}),d())},p=async n=>{n.preventDefault(),await fetch(`${m}/api/albums`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),o({name:"",author:"",href:"",img:""}),d()};return t.jsxs("div",{className:"max-w-4xl mx-auto py-10 space-y-8",children:[t.jsx("h2",{className:"text-3xl font-bold mb-4",children:"专辑管理"}),t.jsxs("form",{onSubmit:p,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx(T,{placeholder:"专辑名",value:e.name,onChange:n=>o(l=>({...l,name:n.target.value}))}),t.jsx(T,{placeholder:"作者",value:e.author,onChange:n=>o(l=>({...l,author:n.target.value}))}),t.jsx(T,{placeholder:"网易云链接",value:e.href,onChange:n=>o(l=>({...l,href:n.target.value}))}),t.jsx(T,{placeholder:"封面图片地址",value:e.img,onChange:n=>o(l=>({...l,img:n.target.value}))}),t.jsx(x,{type:"submit",className:"md:col-span-2",children:"添加专辑"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.map(n=>t.jsxs(w,{className:"p-4 flex gap-4 items-center",children:[t.jsx("img",{src:n.img,alt:n.name,className:"w-24 h-24 object-cover rounded-lg"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-bold",children:n.name}),t.jsx("p",{className:"text-sm text-gray-500",children:n.author}),t.jsx("a",{href:n.href,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 text-sm",children:"查看"})]}),t.jsx(x,{variant:"destructive",onClick:()=>h(n.id),children:"删除"})]},n.id))})]})}const Ye=()=>{const[s,a]=u.useState([]),[e,o]=u.useState(new Set),[m,d]=u.useState(!1),h=et(),p="https://www.chaosama.asia";u.useEffect(()=>{localStorage.getItem("token")||h("/login")},[h]),u.useEffect(()=>{n()},[]);async function n(){const g=await(await fetch(`${p}/api/photos`)).json();a(g)}const l=async i=>{const g=i.target.files;if(!g||g.length===0)return;const r=new FormData;for(const c of g)r.append("photos",c);await fetch(`${p}/api/upload`,{method:"POST",body:r}),await n()},b=i=>{i.preventDefault(),i.stopPropagation(),i.type==="dragenter"||i.type==="dragover"?d(!0):i.type==="dragleave"&&d(!1)},f=async i=>{if(i.preventDefault(),i.stopPropagation(),d(!1),i.dataTransfer.files&&i.dataTransfer.files.length>0){const g=i.dataTransfer.files,r=new FormData;for(const c of g)r.append("photos",c);await fetch(`${p}/api/upload`,{method:"POST",body:r}),await n()}},v=async()=>{for(const i of e)await fetch(`${p}/photos/${i}`,{method:"DELETE"});await n(),o(new Set)},j=async i=>{await fetch(`${p}/api/photos/${i}`,{method:"DELETE"}),await n(),o(g=>{const r=new Set(g);return r.delete(i),r})},N=i=>{o(g=>{const r=new Set(g);return r.has(i)?r.delete(i):r.add(i),r})},I=()=>{o(new Set(s.map(i=>i.id)))},$=()=>{o(new Set)},z=i=>{if(i===0)return"0 Bytes";const g=1024,r=["Bytes","KB","MB","GB"],c=Math.floor(Math.log(i)/Math.log(g));return(i/Math.pow(g,c)).toFixed(2)+" "+r[c]},R=s.reduce((i,g)=>i+g.fileSize,0);return t.jsxs(t.Fragment,{children:[t.jsx(Tt,{}),t.jsxs("main",{className:"container mx-auto px-4 py-8",children:[t.jsx(ke,{}),t.jsx("div",{className:"flex justify-between items-center",children:t.jsx("h1",{className:"text-3xl font-bold mb-6",children:"图片管理"})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[t.jsxs(w,{children:[t.jsxs(O,{className:"flex justify-between items-center pb-2",children:[t.jsx(M,{className:"text-sm font-medium",children:"总照片数"}),t.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(k,{children:t.jsx("div",{className:"text-2xl font-bold",children:s.length})})]}),t.jsxs(w,{children:[t.jsxs(O,{className:"flex justify-between items-center pb-2",children:[t.jsx(M,{className:"text-sm font-medium",children:"已选择"}),t.jsx(Y,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(k,{children:t.jsx("div",{className:"text-2xl font-bold",children:e.size})})]}),t.jsxs(w,{children:[t.jsxs(O,{className:"flex justify-between items-center pb-2",children:[t.jsx(M,{className:"text-sm font-medium",children:"总大小"}),t.jsx($t,{className:"h-4 w-4 text-muted-foreground"})]}),t.jsx(k,{children:t.jsx("div",{className:"text-2xl font-bold",children:z(R)})})]})]}),t.jsx(w,{className:`mb-8 ${m?"border-primary bg-primary/10":""}`,children:t.jsx(k,{children:t.jsxs("div",{onDragEnter:b,onDragLeave:b,onDragOver:b,onDrop:f,className:"relative border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors",children:[t.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:l,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),t.jsx(Yt,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:"上传照片"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"拖拽照片到这里或点击选择文件"}),t.jsx(x,{variant:"outline",children:"选择照片"})]})})}),s.length>0&&t.jsx(w,{className:"mb-6",children:t.jsxs(k,{className:"flex flex-wrap items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(x,{variant:"outline",size:"sm",onClick:I,children:"全选"}),t.jsx(x,{variant:"outline",size:"sm",onClick:$,children:"取消全选"})]}),e.size>0&&t.jsxs(K,{children:[t.jsx(Et,{asChild:!0,children:t.jsxs(x,{variant:"destructive",size:"sm",className:"flex items-center",children:[t.jsx(B,{className:"mr-2 h-4 w-4"}),"删除选中 (",e.size,")"]})}),t.jsxs(W,{children:[t.jsxs(J,{children:[t.jsx(Z,{children:"确认删除"}),t.jsxs(Q,{children:["您确定要删除选中的 ",e.size," 张照片吗？此操作无法撤销。"]})]}),t.jsxs(tt,{children:[t.jsx(x,{variant:"outline",children:"取消"}),t.jsx(x,{variant:"destructive",onClick:v,children:"确认删除"})]})]})]})]})}),s.length===0?t.jsx(w,{children:t.jsxs(k,{className:"py-12 text-center",children:[t.jsx(Y,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),t.jsx("p",{className:"text-lg font-medium mb-2",children:"还没有照片"}),t.jsx("p",{className:"text-muted-foreground",children:"上传一些照片开始管理您的相册"})]})}):t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:s.map(i=>t.jsx(w,{className:"group relative overflow-hidden rounded-none py-0",children:t.jsxs(k,{className:"p-0",children:[t.jsxs("div",{className:"relative aspect-square",children:[t.jsx("img",{src:i.url,alt:i.fileName,className:"w-full h-full object-cover",draggable:!1}),t.jsx("div",{className:`absolute inset-0 border-4 transition-all cursor-pointer ${e.has(i.id)?"border-primary bg-primary/20":"border-transparent hover:border-primary/50"}`,onClick:()=>N(i.id)}),t.jsx("div",{className:"absolute top-2 left-2",children:t.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${e.has(i.id)?"bg-primary border-primary text-primary-foreground":"bg-background border-muted-foreground"}`,children:e.has(i.id)&&t.jsx("div",{className:"w-2 h-2 bg-primary-foreground rounded-full"})})}),t.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:t.jsx(x,{size:"sm",variant:"destructive",onClick:()=>j(i.id),className:"h-8 w-8 p-0",children:t.jsx(B,{className:"h-4 w-4"})})})]}),t.jsxs("div",{className:"p-3",children:[t.jsx("p",{className:"text-sm font-medium truncate",children:i.fileName}),t.jsx("p",{className:"text-xs text-muted-foreground",children:z(i.fileSize)}),t.jsx("p",{className:"text-xs text-muted-foreground",children:new Date(i.uploadDate).toLocaleDateString()})]})]})},i.id))}),t.jsx(Ae,{})]})]})};export{Ye as default};
